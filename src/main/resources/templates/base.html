<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  th:fragment="layout(content)">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>E-Commerce Store</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		  rel="stylesheet"
		  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
		  crossorigin="anonymous">

	<!-- Font Awesome -->
	<link rel="stylesheet"
		  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		  integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
		  crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/style.css">

</head>
<body>

<!-- Modern Navbar -->
<nav class="navbar navbar-expand-lg navbar-modern fixed-top">
	<div class="container-fluid px-3 px-md-5">

		<!-- Brand Logo -->
		<a class="navbar-brand brand-modern" href="/">
			<div class="brand-icon">
				<i class="fa-solid fa-store"></i>
			</div>
			<span class="brand-text">
					<span class="brand-name">ShopHub</span>
					<small class="brand-tagline">Your Shopping Partner</small>
				</span>
		</a>

		<!-- Mobile Toggle -->
		<button class="navbar-toggler border-0" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarContent"
				aria-controls="navbarContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon-custom">
					<i class="fas fa-bars"></i>
				</span>
		</button>

		<!-- Navbar Content -->
		<div class="collapse navbar-collapse" id="navbarContent">

			<!-- Left Navigation -->
			<ul class="navbar-nav mx-auto mb-2 mb-lg-0">

				<!-- Home Link -->
				<th:block th:if="${user==null}">
					<li class="nav-item">
						<a class="nav-link nav-link-modern" href="/">
							<i class="fas fa-home me-1"></i>
							<span>Home</span>
						</a>
					</li>
				</th:block>

				<th:block th:unless="${user==null}">
					<li class="nav-item" th:if="${user.role=='ROLE_ADMIN'}">
						<a class="nav-link nav-link-modern" href="/admin/">
							<i class="fas fa-home me-1"></i>
							<span>Home</span>
						</a>
					</li>

					<li class="nav-item" th:if="${user.role=='ROLE_USER'}">
						<a class="nav-link nav-link-modern" href="/">
							<i class="fas fa-home me-1"></i>
							<span>Home</span>
						</a>
					</li>
				</th:block>

				<!-- Products Link -->
				<li class="nav-item">
					<a class="nav-link nav-link-modern" href="/products">
						<i class="fas fa-box me-1"></i>
						<span>Products</span>
					</a>
				</li>

				<!-- Categories Dropdown -->
				<li class="nav-item dropdown">
					<a class="nav-link nav-link-modern dropdown-toggle"
					   href="#"
					   role="button"
					   data-bs-toggle="dropdown"
					   aria-expanded="false">
						<i class="fas fa-th-large me-1"></i>
						<span>Categories</span>
					</a>
					<ul class="dropdown-menu dropdown-menu-modern">
						<li>
							<a class="dropdown-item dropdown-item-modern" href="/products">
								<i class="fas fa-layer-group me-2"></i>All Categories
							</a>
						</li>
						<li><hr class="dropdown-divider"></li>
						<li th:each="c:${categorys}">
							<a class="dropdown-item dropdown-item-modern"
							   th:href="@{'/products?category='+${c.name}}">
								<i class="fas fa-tag me-2"></i>[[${c.name}]]
							</a>
						</li>
					</ul>
				</li>

			</ul>

			<!-- Right Navigation -->
			<ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">

				<!-- Guest User Links -->
				<th:block th:if="${user==null}">
					<li class="nav-item">
						<a class="nav-link nav-link-modern" href="/signin">
							<i class="fas fa-sign-in-alt me-1"></i>
							<span>Login</span>
						</a>
					</li>
					<li class="nav-item">
						<a class="btn btn-register rounded-pill px-4 ms-lg-2" href="/register">
							<i class="fas fa-user-plus me-2"></i>Register
						</a>
					</li>
				</th:block>

				<!-- Logged-in User Links -->
				<th:block th:if="${user!=null}">

					<!-- Cart (User Only) -->
					<th:block th:if="${user.role=='ROLE_USER'}">
						<li class="nav-item me-lg-3">
							<a class="nav-link nav-link-cart position-relative" href="/user/cart">
								<i class="fas fa-shopping-cart"></i>
								<span class="cart-badge" th:text="${countCart}">0</span>
							</a>
						</li>
					</th:block>

					<!-- User Dropdown -->
					<li class="nav-item dropdown">
						<a class="nav-link nav-link-profile dropdown-toggle"
						   href="#"
						   role="button"
						   data-bs-toggle="dropdown"
						   aria-expanded="false">
							<div class="profile-avatar">
								<i class="fas fa-user"></i>
							</div>
							<span class="profile-name d-none d-lg-inline ms-2">[[${user.name}]]</span>
						</a>
						<ul class="dropdown-menu dropdown-menu-end dropdown-menu-modern">
							<li class="dropdown-header">
								<div class="user-info">
									<div class="user-avatar-large">
										<i class="fas fa-user"></i>
									</div>
									<div class="user-details">
										<div class="user-name">[[${user.name}]]</div>
										<div class="user-email" th:text="${user.email}">email@example.com</div>
									</div>
								</div>
							</li>
							<li><hr class="dropdown-divider"></li>

							<!-- Profile Link -->
							<li th:if="${user.role=='ROLE_USER'}">
								<a class="dropdown-item dropdown-item-modern" href="/user/profile">
									<i class="fas fa-user-circle me-2"></i>My Profile
								</a>
							</li>
							<li th:if="${user.role=='ROLE_ADMIN'}">
								<a class="dropdown-item dropdown-item-modern" href="/admin/profile">
									<i class="fas fa-user-shield me-2"></i>Admin Profile
								</a>
							</li>

							<!-- My Orders (User Only) -->
							<li th:if="${user.role=='ROLE_USER'}">
								<a class="dropdown-item dropdown-item-modern" href="/user/user-orders">
									<i class="fas fa-shopping-bag me-2"></i>My Orders
								</a>
							</li>

							<li><hr class="dropdown-divider"></li>

							<!-- Logout -->
							<li>
								<a class="dropdown-item dropdown-item-modern dropdown-item-danger" href="/logout">
									<i class="fas fa-sign-out-alt me-2"></i>Logout
								</a>
							</li>
						</ul>
					</li>

				</th:block>

			</ul>

		</div>
	</div>
</nav>

<!-- Main Content Area -->
<div class="main-content">
	<div th:replace="${content}"></div>
</div>

<!-- Modern Footer -->
<footer class="footer-modern">
	<div class="footer-top">
		<div class="container">
			<div class="row g-4">

				<!-- About Section -->
				<div class="col-lg-4 col-md-6">
					<div class="footer-widget">
						<div class="footer-brand mb-3">
							<div class="brand-icon">
								<i class="fa-solid fa-store"></i>
							</div>
							<span class="brand-text-footer">ShopHub</span>
						</div>
						<p class="footer-description">
							Your trusted online shopping destination. Quality products, great prices, and exceptional service.
						</p>
						<div class="social-links mt-3">
							<a href="#" class="social-link">
								<i class="fab fa-facebook-f"></i>
							</a>
							<a href="#" class="social-link">
								<i class="fab fa-twitter"></i>
							</a>
							<a href="#" class="social-link">
								<i class="fab fa-instagram"></i>
							</a>
							<a href="#" class="social-link">
								<i class="fab fa-linkedin-in"></i>
							</a>
						</div>
					</div>
				</div>

				<!-- Quick Links -->
				<div class="col-lg-2 col-md-6">
					<div class="footer-widget">
						<h5 class="footer-title">Quick Links</h5>
						<ul class="footer-links">
							<li><a href="/">Home</a></li>
							<li><a href="/products">Products</a></li>
							<li><a href="#">About Us</a></li>
							<li><a href="#">Contact</a></li>
						</ul>
					</div>
				</div>

				<!-- Customer Service -->
				<div class="col-lg-3 col-md-6">
					<div class="footer-widget">
						<h5 class="footer-title">Customer Service</h5>
						<ul class="footer-links">
							<li><a href="#">Help Center</a></li>
							<li><a href="#">Track Order</a></li>
							<li><a href="#">Returns</a></li>
							<li><a href="#">Shipping Info</a></li>
							<li><a href="#">FAQ</a></li>
						</ul>
					</div>
				</div>

				<!-- Contact Info -->
				<div class="col-lg-3 col-md-6">
					<div class="footer-widget">
						<h5 class="footer-title">Contact Us</h5>
						<ul class="footer-contact">
							<li>
								<i class="fas fa-map-marker-alt"></i>
								<span>123 Shopping Street, NY 10001</span>
							</li>
							<li>
								<i class="fas fa-phone-alt"></i>
								<span>+1 234 567 8900</span>
							</li>
							<li>
								<i class="fas fa-envelope"></i>
								<span>support@shophub.com</span>
							</li>
						</ul>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Footer Bottom -->
	<div class="footer-bottom">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-md-6 text-center text-md-start">
					<p class="mb-0">
						&copy; 2024 <strong>ShopHub</strong>. All rights reserved.
					</p>
				</div>
				<div class="col-md-6 text-center text-md-end">
					<div class="payment-methods">
						<i class="fab fa-cc-visa"></i>
						<i class="fab fa-cc-mastercard"></i>
						<i class="fab fa-cc-paypal"></i>
						<i class="fab fa-cc-amex"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>

<!-- Scroll to Top Button -->
<button class="scroll-to-top" id="scrollToTop">
	<i class="fas fa-arrow-up"></i>
</button>

<!-- Custom Styles -->
<style>
	/* Global Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', sans-serif;
        padding-top: 80px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .main-content {
        flex: 1;
    }

    /* Modern Navbar */
    .navbar-modern {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        padding: 1rem 0;
        transition: all 0.3s ease;
    }

    .navbar-modern.scrolled {
        padding: 0.5rem 0;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.15);
    }

    /* Brand Styles */
    .brand-modern {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
        color: white;
        transition: all 0.3s ease;
    }

    .brand-modern:hover {
        transform: translateY(-2px);
        color: white;
    }

    .brand-icon {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        backdrop-filter: blur(10px);
    }

    .brand-text {
        display: flex;
        flex-direction: column;
    }

    .brand-name {
        font-size: 1.5rem;
        font-weight: 700;
        line-height: 1;
    }

    .brand-tagline {
        font-size: 0.75rem;
        opacity: 0.9;
    }

    /* Navbar Toggler */
    .navbar-toggler-icon-custom {
        color: white;
        font-size: 1.5rem;
    }

    /* Nav Links */
    .nav-link-modern {
        color: rgba(255, 255, 255, 0.9) !important;
        font-weight: 500;
        padding: 0.5rem 1rem !important;
        border-radius: 8px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .nav-link-modern:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white !important;
        transform: translateY(-2px);
    }

    /* Register Button */
    .btn-register {
        background: white;
        color: #667eea;
        font-weight: 600;
        border: none;
        transition: all 0.3s ease;
    }

    .btn-register:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(255, 255, 255, 0.3);
        color: #667eea;
    }

    /* Cart Badge */
    .nav-link-cart {
        position: relative;
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex !important;
        align-items: center;
        justify-content: center;
        color: white !important;
        font-size: 1.25rem;
        transition: all 0.3s ease;
    }

    .nav-link-cart:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
    }

    .cart-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff416c;
        color: white;
        font-size: 0.75rem;
        font-weight: 700;
        min-width: 20px;
        height: 20px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 5px;
        box-shadow: 0 2px 8px rgba(255, 65, 108, 0.4);
    }

    /* Profile Link */
    .nav-link-profile {
        display: flex !important;
        align-items: center;
        gap: 0.5rem;
        color: white !important;
        padding: 0.5rem 1rem !important;
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
    }

    .nav-link-profile:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    .profile-avatar {
        width: 35px;
        height: 35px;
        background: white;
        color: #667eea;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
    }

    .profile-name {
        font-weight: 600;
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    /* Dropdown Menu */
    .dropdown-menu-modern {
        border: none;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        border-radius: 12px;
        padding: 0;
        overflow: hidden;
        min-width: 280px;
    }

    .dropdown-header {
        padding: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.5rem;
    }

    .user-avatar-large {
        width: 60px;
        height: 60px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        flex-shrink: 0;
    }

    .user-details {
        color: white;
        flex: 1;
        min-width: 0;
    }

    .user-name {
        font-weight: 700;
        font-size: 1.1rem;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .user-email {
        font-size: 0.875rem;
        opacity: 0.9;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .dropdown-item-modern {
        padding: 0.75rem 1.5rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .dropdown-item-modern:hover {
        background: linear-gradient(90deg, rgba(102, 126, 234, 0.1) 0%, transparent 100%);
        color: #667eea;
        padding-left: 2rem;
    }

    .dropdown-item-danger:hover {
        background: linear-gradient(90deg, rgba(220, 53, 69, 0.1) 0%, transparent 100%);
        color: #dc3545;
    }

    /* Footer Styles */
    .footer-modern {
        background: #1a1a2e;
        color: #ffffff;
        margin-top: auto;
    }

    .footer-top {
        padding: 4rem 0 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-widget {
        margin-bottom: 2rem;
    }

    .footer-brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .brand-text-footer {
        font-size: 1.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .footer-description {
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.6;
    }

    .footer-title {
        font-size: 1.125rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: white;
    }

    .footer-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .footer-links li {
        margin-bottom: 0.75rem;
    }

    .footer-links a {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-block;
    }

    .footer-links a:hover {
        color: #667eea;
        padding-left: 5px;
    }

    .footer-contact {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .footer-contact li {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        margin-bottom: 1rem;
        color: rgba(255, 255, 255, 0.7);
    }

    .footer-contact i {
        color: #667eea;
        margin-top: 3px;
    }

    .social-links {
        display: flex;
        gap: 0.75rem;
    }

    .social-link {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .social-link:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transform: translateY(-3px);
        color: white;
    }

    .footer-bottom {
        padding: 1.5rem 0;
    }

    .footer-bottom p {
        color: rgba(255, 255, 255, 0.7);
        margin: 0;
    }

    .payment-methods {
        display: flex;
        gap: 1rem;
        justify-content: center;
        justify-content: end;
    }

    .payment-methods i {
        font-size: 2rem;
        color: rgba(255, 255, 255, 0.5);
        transition: all 0.3s ease;
    }

    .payment-methods i:hover {
        color: #667eea;
        transform: translateY(-2px);
    }

    /* Scroll to Top */
    .scroll-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        z-index: 1000;
    }

    .scroll-to-top:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
    }

    .scroll-to-top.show {
        display: flex;
    }

    /* Responsive */
    @media (max-width: 991px) {
        .navbar-nav {
            padding: 1rem 0;
        }

        .nav-link-modern {
            margin: 0.25rem 0;
        }

        .btn-register {
            width: 100%;
            margin-top: 0.5rem;
        }

        .nav-link-cart {
            width: auto;
            border-radius: 8px;
            padding: 0.5rem 1rem !important;
        }

        .nav-link-profile {
            width: 100%;
            justify-content: flex-start;
            margin-top: 0.5rem;
        }

        .profile-name {
            display: inline !important;
            max-width: none;
        }

        .payment-methods {
            justify-content: center;
            margin-top: 1rem;
        }

        body {
            padding-top: 70px;
        }
    }
</style>

<!-- Scripts -->
<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- jQuery Validation -->
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>

<!-- Custom Scripts -->
<script type="text/javascript" src="/js/script.js"></script>
<script type="text/javascript" src="../js/script.js"></script>

<!-- Bootstrap Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>

<!-- Additional Scripts -->
<script>
	// Navbar scroll effect
    window.addEventListener('scroll', function() {
        const navbar = document.querySelector('.navbar-modern');
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Scroll to top button
    const scrollToTopBtn = document.getElementById('scrollToTop');

    window.addEventListener('scroll', function() {
        if (window.scrollY > 300) {
            scrollToTopBtn.classList.add('show');
        } else {
            scrollToTopBtn.classList.remove('show');
        }
    });

    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    // Close mobile menu on link click
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function() {
            const navbarCollapse = document.getElementById('navbarContent');
            if (navbarCollapse.classList.contains('show')) {
                const bsCollapse = new bootstrap.Collapse(navbarCollapse);
                bsCollapse.hide();
            }
        });
    });
</script>

</body>
</html>