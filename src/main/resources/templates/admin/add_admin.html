<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  th:replace="~{base::layout(~{::section})}">
<head>
	<meta charset="UTF-8">
	<title>Add Admin</title>
</head>
<body>
<section>
	<div class="container-fluid mt-4 px-3 px-md-5 py-4">

		<!-- Page Header -->
		<div class="row mb-4">
			<div class="col-12">
				<div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
					<div>
						<h2 class="fw-bold mb-2">
							<i class="fas fa-user-shield text-primary me-2"></i>Add New Admin
						</h2>
						<p class="text-muted mb-0">Create a new administrator account with full access</p>
					</div>
					<div>
						<a href="/admin/users?type=2" class="btn btn-outline-secondary rounded-pill px-4">
							<i class="fas fa-arrow-left me-2"></i>Back to Admins
						</a>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-10 offset-lg-1 col-xl-8 offset-xl-2">

				<!-- Add Admin Card -->
				<div class="card border-0 shadow-lg rounded-4 overflow-hidden">

					<!-- Card Header with Gradient -->
					<div class="card-header text-white py-4 border-0"
						 style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
						<h5 class="mb-0 fw-bold text-center">
							<i class="fas fa-user-plus me-2"></i>Administrator Registration
						</h5>
					</div>

					<div class="card-body p-4 p-md-5">

						<!-- Success/Error Messages -->
						<th:block th:if="${session.succMsg}">
							<div class="alert alert-success alert-dismissible fade show border-0 shadow-sm rounded-3 mb-4" role="alert">
								<div class="d-flex align-items-center">
									<i class="fas fa-check-circle fs-4 me-3"></i>
									<div>
										<strong>Success!</strong>
										<p class="mb-0">[[${session.succMsg}]]</p>
									</div>
								</div>
								<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
								<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
							</div>
						</th:block>

						<th:block th:if="${session.errorMsg}">
							<div class="alert alert-danger alert-dismissible fade show border-0 shadow-sm rounded-3 mb-4" role="alert">
								<div class="d-flex align-items-center">
									<i class="fas fa-exclamation-circle fs-4 me-3"></i>
									<div>
										<strong>Error!</strong>
										<p class="mb-0">[[${session.errorMsg}]]</p>
									</div>
								</div>
								<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
								<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
							</div>
						</th:block>

						<!-- Registration Form -->
						<form action="/admin/save-admin" enctype="multipart/form-data" method="post" id="adminForm">

							<!-- Personal Information Section -->
							<div class="mb-4 pb-3 border-bottom">
								<h6 class="fw-bold text-primary mb-3">
									<i class="fas fa-user me-2"></i>Personal Information
								</h6>

								<div class="row g-3">
									<!-- Full Name -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-id-card text-primary me-2"></i>Full Name
										</label>
										<input required
											   class="form-control form-control-lg rounded-3 border-2"
											   name="name"
											   type="text"
											   placeholder="Enter full name">
									</div>

									<!-- Mobile Number -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-mobile-alt text-success me-2"></i>Mobile Number
										</label>
										<div class="input-group input-group-lg">
                                                <span class="input-group-text bg-light border-end-0 rounded-start-3">
                                                    <i class="fas fa-phone text-muted"></i>
                                                </span>
											<input required
												   class="form-control border-start-0 rounded-end-3"
												   name="mobileNumber"
												   type="tel"
												   placeholder="Enter mobile number"
												   pattern="[0-9]{10}"
												   maxlength="10">
										</div>
									</div>

									<!-- Email -->
									<div class="col-12">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-envelope text-info me-2"></i>Email Address
										</label>
										<div class="input-group input-group-lg">
                                                <span class="input-group-text bg-light border-end-0 rounded-start-3">
                                                    <i class="fas fa-at text-muted"></i>
                                                </span>
											<input required
												   class="form-control border-start-0 rounded-end-3"
												   name="email"
												   type="email"
												   placeholder="Enter email address">
										</div>
									</div>
								</div>
							</div>

							<!-- Address Information Section -->
							<div class="mb-4 pb-3 border-bottom">
								<h6 class="fw-bold text-primary mb-3">
									<i class="fas fa-map-marker-alt me-2"></i>Address Information
								</h6>

								<div class="row g-3">
									<!-- Address -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-home text-danger me-2"></i>Address
										</label>
										<input required
											   class="form-control form-control-lg rounded-3 border-2"
											   name="address"
											   type="text"
											   placeholder="Street address">
									</div>

									<!-- City -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-city text-warning me-2"></i>City
										</label>
										<input required
											   class="form-control form-control-lg rounded-3 border-2"
											   name="city"
											   type="text"
											   placeholder="Enter city">
									</div>

									<!-- State -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-flag text-primary me-2"></i>State
										</label>
										<input required
											   class="form-control form-control-lg rounded-3 border-2"
											   name="state"
											   type="text"
											   placeholder="Enter state">
									</div>

									<!-- Pincode -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-mail-bulk text-success me-2"></i>Pincode
										</label>
										<input required
											   class="form-control form-control-lg rounded-3 border-2"
											   name="pincode"
											   type="text"
											   placeholder="Enter pincode"
											   pattern="[0-9]{6}"
											   maxlength="6">
									</div>
								</div>
							</div>

							<!-- Security Information Section -->
							<div class="mb-4 pb-3 border-bottom">
								<h6 class="fw-bold text-primary mb-3">
									<i class="fas fa-lock me-2"></i>Security Information
								</h6>

								<div class="row g-3">
									<!-- Password -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-key text-warning me-2"></i>Password
										</label>
										<div class="input-group input-group-lg">
                                                <span class="input-group-text bg-light border-end-0 rounded-start-3">
                                                    <i class="fas fa-lock text-muted"></i>
                                                </span>
											<input required
												   class="form-control border-start-0 border-end-0"
												   name="password"
												   type="password"
												   id="password"
												   placeholder="Enter password"
												   minlength="6">
											<button class="btn btn-outline-secondary rounded-end-3 border-start-0"
													type="button"
													onclick="togglePassword('password', this)">
												<i class="fas fa-eye"></i>
											</button>
										</div>
									</div>

									<!-- Confirm Password -->
									<div class="col-md-6">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-check-circle text-success me-2"></i>Confirm Password
										</label>
										<div class="input-group input-group-lg">
                                                <span class="input-group-text bg-light border-end-0 rounded-start-3">
                                                    <i class="fas fa-lock text-muted"></i>
                                                </span>
											<input required
												   class="form-control border-start-0 border-end-0"
												   name="cpassword"
												   type="password"
												   id="cpassword"
												   placeholder="Confirm password"
												   minlength="6">
											<button class="btn btn-outline-secondary rounded-end-3 border-start-0"
													type="button"
													onclick="togglePassword('cpassword', this)">
												<i class="fas fa-eye"></i>
											</button>
										</div>
									</div>

									<!-- Password Requirements -->
									<div class="col-12">
										<div class="alert alert-info border-0 rounded-3 mb-0">
											<div class="d-flex align-items-start">
												<i class="fas fa-info-circle fs-5 me-3 mt-1"></i>
												<div>
													<strong>Password Requirements:</strong>
													<ul class="mb-0 mt-2 ps-3 small">
														<li>Minimum 6 characters long</li>
														<li>Must match in both fields</li>
														<li>Use a strong, unique password</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Profile Image Section -->
							<div class="mb-4">
								<h6 class="fw-bold text-primary mb-3">
									<i class="fas fa-camera me-2"></i>Profile Image
								</h6>

								<div class="row g-3">
									<div class="col-12">
										<label class="form-label fw-semibold text-muted">
											<i class="fas fa-image text-purple me-2"></i>Upload Profile Picture
										</label>
										<input class="form-control form-control-lg rounded-3 border-2"
											   name="img"
											   type="file"
											   accept="image/*"
											   id="profileImageInput">
										<small class="text-muted">
											<i class="fas fa-info-circle me-1"></i>Recommended: Square image, Max 2MB
										</small>
									</div>

									<!-- Image Preview -->
									<div class="col-12" id="imagePreviewContainer" style="display: none;">
										<label class="form-label fw-semibold text-muted d-block mb-2">
											<i class="fas fa-eye text-info me-2"></i>Preview
										</label>
										<div class="text-center p-4 bg-light rounded-3 border border-2 border-dashed">
											<img id="imagePreview"
												 class="rounded-circle shadow-lg border border-4 border-white"
												 style="width: 150px; height: 150px; object-fit: cover;"
												 alt="Preview">
										</div>
									</div>
								</div>
							</div>

							<!-- Action Buttons -->
							<div class="d-flex gap-3 mt-5">
								<button type="submit" class="btn btn-primary btn-lg flex-fill rounded-3 shadow-sm">
									<i class="fas fa-user-plus me-2"></i>Register Admin
								</button>
								<button type="reset" class="btn btn-outline-secondary btn-lg rounded-3" style="min-width: 150px;">
									<i class="fas fa-redo me-2"></i>Reset
								</button>
							</div>

						</form>

					</div>
				</div>

			</div>
		</div>

	</div>

	<!-- Custom Styles -->
	<style>
		.form-control:focus,
        .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
        }

        .rounded-4 {
            border-radius: 1rem !important;
        }

        .text-purple {
            color: #764ba2;
        }

        .input-group:focus-within .input-group-text {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .border-dashed {
            border-style: dashed !important;
        }

        .border-bottom {
            border-color: rgba(0, 0, 0, 0.08) !important;
        }

        @media (max-width: 768px) {
            .form-control-lg {
                font-size: 1rem;
            }
        }
	</style>

	<!-- Scripts -->
	<script>
		// Toggle password visibility
        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Image preview functionality
        document.addEventListener('DOMContentLoaded', function() {
            const imageInput = document.getElementById('profileImageInput');
            const imagePreview = document.getElementById('imagePreview');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');

            imageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        imagePreview.src = event.target.result;
                        imagePreviewContainer.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreviewContainer.style.display = 'none';
                }
            });

            // Password match validation
            const form = document.getElementById('adminForm');
            form.addEventListener('submit', function(e) {
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('cpassword').value;

                if (password !== confirmPassword) {
                    e.preventDefault();
                    alert('Passwords do not match! Please ensure both password fields are identical.');
                    return false;
                }
            });
        });
	</script>

</section>
</body>
</html>